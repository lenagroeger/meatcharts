
<!DOCTYPE html>
<meta charset="utf-8">
<style>

.land {
  fill: #fff;
  stroke: #ccc;
}

.state {
  fill: #ccc;
}

.body {
  fill:rgba(0,0,0,.5);
   stroke: none;
}

/*.bbox {
    position: absolute;
    border: 1px solid red;
}*/

</style>

<body>
<div id="chart"></div>

<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="jquery.js"></script>


<script>

var margin = {
          top: 200,
          right: 50,
          bottom: 50,
          left: 200
        };

var avg = 125;


function randomIntFromInterval(min,max)
{
    return Math.floor(Math.random()*(max-min+1)+min);
}



var meats = [
    {"value": randomIntFromInterval(15,500),"name":"torso"},
    {"value": randomIntFromInterval(15,500),"name":"leftfoot"},
    {"value": randomIntFromInterval(15,500),"name":"rightfoot"},
    {"value": randomIntFromInterval(15,500),"name":"head"},
    {"value": randomIntFromInterval(15,500),"name":"leftarm"},
    {"value": randomIntFromInterval(15,500),"name":"lefthand"},
    {"value": randomIntFromInterval(15,500),"name":"rightarm"},
    {"value": randomIntFromInterval(15,500), "name":"righthand"},
    {"value": randomIntFromInterval(15,500),"name":"leftleg"},
    {"value": randomIntFromInterval(15,500), "name":"rightleg"}
  ];


// desiredArea = ( value / maxValue ) * maxArea;
// desiredScale = Math.sqrt( desiredArea / originalArea );
var meatPaths2 = ["M116,0.833c8.492,2.488,16.552,5.598,22.985,12.177 c17.314,17.707,15.001,46.507-4.554,61.642c-9.639,7.459-20.334,7.145-31.332,6.797c-0.824-0.026-1.641-0.416-2.459-0.407 c-4.843,0.05-8.639-1.633-12.701-4.667c-14.653-10.944-21.501-25.02-17.738-42.969c3.611-17.226,14.72-27.854,32.058-31.71 c0.613-0.137,1.162-0.568,1.74-0.862C108,0.833,112,0.833,116,0.833z","M73,309c-2.925-0.297-5.846-0.805-8.776-0.855 c-12.298-0.217-24.6-0.285-36.899-0.441c-1.802-0.022-3.602-0.227-5.301-0.34c-3.854-13.521,5.639-27.382,20.987-30.125 c5.248-0.938,10.82-0.474,16.21-0.128c13.257,0.849,26.535,0.499,39.778,1.558c1.144,0.092,2.228,0.201,3.71,0.5 c-0.909,9.43-1.81,20.498-2.71,29.832C91,309,82,309,73,309z","M150.455,309c2.925-0.297,5.846-0.805,8.776-0.855 c12.299-0.217,24.6-0.285,36.899-0.441c1.803-0.022,3.602-0.227,5.301-0.34c3.854-13.521-5.639-27.382-20.987-30.125 c-5.248-0.938-10.82-0.474-16.211-0.128c-13.257,0.849-26.534,0.499-39.778,1.558c-1.143,0.092-2.228,0.201-3.709,0.5 c0.908,9.43,1.809,20.498,2.709,29.832C132.454,309,141.454,309,150.455,309z","M8.347,190.864c0.122-1.316,0.179-2.644,0.377-3.948 c1.628-10.747,4.022-12.734,14.615-12.129c5.142,0.294,10.282,0.636,15.243,0.945c1.19,2.374,2.123,4.602,3.369,6.635 c1.826,2.979,4.818,6.289,1.383,9.221c-1.781,1.521-5.563,0.696-8.441,0.933c-0.135-0.463-0.271-0.925-0.405-1.387 c-0.751,2.705-1.086,5.642-2.411,8.028c-0.79,1.427-3.3,2.989-4.748,2.748c-3.823-0.636-7.518-2.143-11.195-3.491 c-0.793-0.29-1.197-1.515-1.961-2.05c-1.163-0.815-2.485-1.406-3.739-2.093C9.737,193.138,9.042,192.002,8.347,190.864z","M64.333,94.834c-0.185-3.93,4.813-7.26,8.07-9.316 c9.113-3.044,69.929-3.418,76.997-0.373c2.91,1.254,5.412,6.325,5.6,9.576c-0.5,16.779-0.802,29.982,0,46.446 c1.275,15.833,2.549,24.9,3.035,37.458c0.124,3.195-0.701,5.17-3.511,6.923c-34.941,5.767-46.113,6.62-85.927,0.854 c-3.426-0.496-3.995-3.948-3.77-7.33c0.287-4.312,0.069-8.66,0.069-12.992C65.275,166.065,65.41,117.728,64.333,94.834z","M64.965,186.947c8.044,5.415,36.895,3.443,43.145,8.11 c1.467,1.096-0.399,24.002-0.573,25.797c-1.636,16.857-1.734,33.821-3.636,50.653c-0.239,2.111-0.341,2.176-0.816,4.947 c-15.562-1.22-31.252-0.398-46.719-1.61C59.229,245.572,62.042,216.83,64.965,186.947z","M158.402,186.947c-8.044,5.415-36.895,3.443-43.145,8.11 c-1.467,1.096,0.399,24.002,0.573,25.797c1.636,16.857,1.733,33.821,3.636,50.653c0.238,2.111,0.341,2.176,0.816,4.947 c15.562-1.22,31.251-0.398,46.719-1.61C164.139,245.572,161.326,216.83,158.402,186.947z","M17.607,157.245c14.483-20.725,28.628-40.965,43.694-62.523 c0.479,4.778,0.929,7.965,1.095,11.167c0.674,12.949,1.351,42.661-0.586,44.422c-6.635,6.035-13.255,10.991-19.076,19.009 c-3.436,4.73-5.649,4.496-11.983,4.021c-2.507-0.189-2.507-0.189-14-0.674C14.425,172.568,14.584,165.001,17.607,157.245z","M211.748,190.864c-0.122-1.316-0.179-2.644-0.377-3.948 c-1.629-10.747-4.022-12.734-14.615-12.129c-5.143,0.294-10.281,0.636-15.243,0.945c-1.19,2.374-2.122,4.602-3.368,6.635 c-1.826,2.979-4.818,6.289-1.383,9.221c1.781,1.521,5.562,0.696,8.44,0.933c0.136-0.463,0.271-0.925,0.405-1.387 c0.752,2.705,1.086,5.642,2.41,8.028c0.791,1.427,3.301,2.989,4.748,2.748c3.823-0.636,7.518-2.143,11.195-3.491 c0.793-0.29,1.197-1.515,1.961-2.05c1.163-0.815,2.484-1.406,3.739-2.093C210.357,193.138,211.053,192.002,211.748,190.864z","M202.488,157.245c-14.484-20.725-28.629-40.965-43.694-62.523 c-0.479,4.778-0.929,7.965-1.095,11.167c-0.675,12.949-1.352,42.661,0.586,44.422c6.635,6.035,13.255,10.991,19.076,19.009 c3.436,4.73,5.648,4.496,11.982,4.021c2.508-0.189,2.508-0.189,14-0.674C205.67,172.568,205.511,165.001,202.488,157.245z"]
// var meatPaths = [ "M140.846,77.693c-1.66-0.9-2.813-2.233-3.521-3.805H106.61c-0.967,2.247-2.44,3.735-4.842,5.032 c-3.827,2.067-8.112,3.404-12.073,5.228c-1.773,0.816-3.509,1.628-5.455,1.915c-0.906,0.133-1.828,0.214-2.738,0.348v51.546 c0.111-0.127,0.221-0.26,0.334-0.382c1.576,2.698,2.344,4.526,2.734,7.689c0.243,1.976-0.07,5.029,0.76,6.839 c2 061,4.496,2.494,10.518,2.863,15.408c0.34,4.509,1.143,9.138,1.014,13.656c-0.115,4.017-0.954,7.97-2.098,11.811 c-1.164,3.915-2.432,7.902-4.307,11.528c-1.865,3.605-2.414,7.633-3.141,11.59c-1.527,8.332-5.07,16.14-6.562,24.463 c-0.681,3.803-2.811,7.073-3.347,10.953c-0.42,3.037-0.826,6.083-1.232,9.127h48.789c0.444-0.404,0.93-0.779,1.359-1.196 c1.029-0.999,2.188-2.041,3.738-1.835c1.621,0.215,2.205,1.698,3.535,2.404c0.356,0.189,0.659,0.401,0.932,0.627h49.074 c-0.186-1.069-0.377-2.141-0.562-3.222c-0.707-4.123-1.349-8.239-2.513-12.265c-1.246-4.318-2.308-8.666-3.432-13.012 c-0.493-1.906-1.67-3.535-2.338-5.374c-0.689-1.899-0.865-4.016-1.09-6.011c-0.25-2.211-0.354-4.3-1.303-6.336 c-0.714-1.531-1.58-3.11-1.67-4.835c-0.198-3.777-1.999-7.13-3.384-10.568c-0.71-1.764-0.8-4.41-1.918-5.917 c-1.079-1.454-1.703-3.161-1.963-4.944c-0.589-4.036-0.197-8.388,0.022-12.444c0.471-8.659,1.852-17.484,3.471-25.998 c0.479-2.516,0.988-5.025,1.5-7.534c0.26-1.276,0.276-5.068,1.98-4.245V86.212C155.174,84.669,147.641,81.375,140.846,77.693z","M57.795,474.242c-0.91,3.82-3.347,6.534-5.676,9.579c-2.226,2.909-4.811,4.469-7.57,6.724 c-1.406,1.147-1.868,2.738-1.793,4.51c0.043,1.021,3.054,1.914,3.705,2.19c1.701,0.72,3.414,1.564,5.148,2.193 c1.381,0.502,2.605-0.422,3.992,0.391c1.594,0.935,2.32,1.997,4.332,1.659c1.533-0.258,2.896-1.045,4.066-2.044 c1.791-1.526,2.546-4.767,4.788-5.604c3.352-1.252,3.521-6.535,3.817-9.631c0.385-4.028,1.704-7.487,2.859-11.329 c0.141,0.069,0.281,0.138,0.422,0.207c-0.676-2.394-0.933-4.793-0.941-7.198H59.256C58.916,468.688,58.453,471.476,57.795,474.242z" , "M168.207,472.163c0.135,1.806,1.332,3.497,2.013,5.141c1.544,3.724,1.289,7.311,1.946,11.185 c0.271,1.595,0.755,4.488,2.214,5.48c1.046,0.713,2.243,1.291,3.064,2.284c0.831,1.005,0.72,2.12,1.511,3.04 c1.125,1.301,2.741,1.901,4.305,2.489c1.913,0.721,2.57,1.366,4.401,0.172c1.538-1.002,2.349-1.542,4.203-1.564 c2.582-0.031,8.117-1.257,9.715-3.495c2.562-3.587-2.138-5.325-4.399-7.217c-2.758-2.306-4.992-5.151-7.051-8.079 c-2.554-3.629-4.103-6.41-4.736-10.874c-0.229-1.608-0.347-3.221-0.402-4.836H169.4c-0.001,0.01,0,0.019,0,0.028 C169.267,468.082,168.043,469.945,168.207,472.163z","M136.482,69.848c-0.006-3.751-0.109-7.598,1.1-11.202c0.66-1.964,1.748-3.716,2.381-5.699 c0.516-1.613,1.066-3.224,2.173-4.542c2.372-2.825,3.914-5.129,4.274-8.932c0.111-1.169,0.127-2.346,0.09-3.519 c-0.035-1.183,0.361-1.682-0.874-1.781c-1.317-0.106-1.53-1.225-1.589-2.333c-0.206-3.854,0.447-7.731-0.031-11.572 c-0.293-2.352-1.223-4.446-2.049-6.641c-0.596-1.582-0.912-3.875-1.922-5.229c-2.053-2.755-6.527-5.627-9.725-6.766 c-3.655-1.302-8.006-2.188-11.822-1.233c-3.292,0.825-7.344,2.038-10.172,3.939c-6.077,4.088-7.891,13.097-8.113,19.895 c-0.082,2.522,0.047,5.043,0.107,7.564c0.027,1.128,0.564,2.106-0.741,2.285c-1.073,0.147-1.321-0.159-1.446,1.061 c-0.342,3.303-0.046,6.809,1.208,9.906c0.582,1.438,1.409,2.854,2.634,3.839c1.455,1.17,2.08,0.598,2.178,2.721 c0.084,1.833,1.154,2.919,1.781,4.57c0.602,1.587,0.821,3.281,1.02,4.958c0.232,1.977,0.814,3.86,1.096,5.81 c0.259,1.79-0.35,3.592-0.834,5.289c-0.172,0.6-0.375,1.139-0.595,1.651h30.714C136.771,72.661,136.484,71.292,136.482,69.848z","M79.111,86.989c-3.785,1.452-6.304,4.538-8.662,7.586c-1.641,2.119-3.365,6.214-3.358,8.916 c0.005,1.938-1.003,3.688-1.59,5.533c-0.61,1.917-0.931,3.922-1.255,5.903c-0.682,4.155-1.354,8.301-2.143,12.437 c-0.863,4.521-2.08,8.566-3.772,12.852c-1.322,3.348-3.128,6.531-4.254,9.946c-1.351,4.098-2.519,8.209-4.081,12.24 c-1.396,3.604-2.494,7.534-4.283,10.959c-2.039,3.903-4.274,7.559-5.83,11.71c-1.363,3.642-2.133,7.468-3.145,11.218 c-2.263,8.39-3.781,17.058-6.648,25.271c-1.299,3.72-2.529,7.942-4.529,11.359c-0.095,0.161-0.201,0.316-0.311,0.47h14.752v0.482 c2.483-5.503,5.85-10.451,8.923-15.682c3.851-6.554,6.755-13.744,9.724-20.728c1.439-3.386,3.075-6.716,4.351-10.167 c1.241-3.36,1.78-6.915,2.769-10.349c1.004-3.491,1.976-7.016,3.068-10.479c1.09-3.457,3.129-6.499,4.479-9.849 c1.397-3.464,3.165-7.022,3.99-10.673c0.657-2.909,2.23-5.761,4.196-7.987V86.411C80.688,86.531,79.885,86.693,79.111,86.989z","M16.318,238.834c-1.73,0.84-3.926,1.631-5.293,3.041c-1.266,1.307-2.385,2.742-3.596,4.098 c-2.215,2.478-5.207,6.356-4.763,7.586c2.167,2.167,3.271-0.312,5.234-1.589c1.071-0.696,2.037-3.161,4.792-3.284 c1.834-0.082-0.331,4.14-0.7,5.17c-1.555,4.34-2.656,8.861-4.26,13.165c-0.73,1.963-1.77,3.621-2.01,5.752 c-0.232,2.051-2.145,5.23,0.266,6.161c4.398-2.763,5.77-12.209,8.99-15.82c-0.374,3.836-2.671,11.464-3.955,15.098 c-0.887,2.509-1.91,6.487,1.088,6.486c3.283-0.001,7.626-19.076,8.058-20.478c1.368,0.234-0.13,4.552-0.183,5.778 c-0.04,0.926-0.145,1.817-0.431,2.704c-0.509,1.576-1.234,5.406-2.039,6.862c-1.125,2.038,2.729,3.742,3.711,1.393 c2.728-6.53,3.157-9.726,5.577-16.057c0.743,1.801,0.326,2.548,0.102,4.414c-0.212,1.748-0.344,3.562-1.321,6.842 c-0.874,2.932,1.034,5.282,2.917,2.053c1.539-2.643,2.245-5.995,2.807-9.279c0.582-3.4,1.968-6.425,2.382-9.864 c0.856-7.118,2.47-14.964,4.889-21.726c0.425-1.188,0.911-2.336,1.423-3.469v-0.482H25.25 C23.32,236.074,19.133,237.47,16.318,238.834z","M166.629,146.982c0.654,1.729,2.088,3.137,2.73,4.972c0.557,1.593,0.959,3.235,1.533,4.823 c1.294,3.576,3.09,7.026,4.477,10.588c2.964,7.614,4.247,15.583,6.568,23.371c1.263,4.239,4.032,8.275,6.039,12.197 c1.807,3.53,3.262,7.201,4.937,10.788c3.202,6.854,8.304,12.607,11.166,19.667h15.691c-0.005-0.007-0.011-0.012-0.016-0.019 c-3.39-4.367-4.498-10.519-6.374-15.6c-1.314-3.56-1.613-7.366-2.812-10.975c-1.117-3.361-1.896-6.586-2.393-10.09 c-1.178-8.324-5.44-15.812-9.055-23.265c-3.771-7.774-6.816-15.853-9.653-24.014c-1.527-4.392-3.206-8.829-4.331-13.342 c-1.004-4.023-2.986-7.383-3.462-11.583c-0.483-4.258-0.454-8.251-1.976-12.293c-1.387-3.684-1.749-7.566-2.91-11.313 c-1.939-6.253-5.699-13.173-12.736-14.413c-0.434-0.077-0.867-0.182-1.301-0.27v51.723c0.117,0.057,0.242,0.134,0.377,0.237 C165.711,140.154,165.584,144.218,166.629,146.982z","M204.844,235.45c0.626,1.917,2.051,3.322,2.721,5.184c0.652,1.809,0.65,3.993,1.086,5.88 c0.945,4.102,2.456,8.036,3.221,12.186c0.771,4.182,0.536,8.321,1.962,12.379c0.584,1.662,1.249,3.297,1.725,4.994 c0.403,1.442,0.483,2.746,2.177,3.189c1.638,0.429,1.861-2.287,1.823-3.191c-0.062-1.493-0.575-1.217-1.15-4.108 c-0.728-3.657-0.917-4.651-0.831-7.715c1.086-0.879,1.734,1.111,2.153,3.946c0.513,3.473,1.696,6.721,2.806,10.034 c0.403,1.204,0.822,3.522,1.867,4.339c1.23,0.962,2.584,1.376,2.373-0.689c-0.375-3.657-3.093-12.383-2.752-16.041 c1.443-0.143,2.502,3.964,3.147,6.041c0.341,1.097,0.866,3.079,1.306,4.141c0.77,1.855,0.846,3.907,1.609,5.735 c0.709,1.695,2.037,2.773,3.637,1.865c0.612-1.814,0.23-3.593-0.171-5.786c-0.455-2.485-0.851-2.127-2.298-7.062 c-0.389-1.329-2.211-5.02-0.85-7.062c0.68-0.085,0.936,0.681,2.978,6.636c0.233,0.681,3.287,8.054,4.051,8.096 c1.653,0.091,2.175-0.925,2.206-2.19c0.051-2.068-0.738-3.541-1.346-5.392c-1.508-4.597-2.653-8.132-4.038-12.448 c-0.8-2.496-1.56-5.006-2.323-7.513c-0.372-1.22-1.072-2.02,0.471-2.4c0.418-0.104,0.801-0.022,1.107,0.289 c1.159,1.175,2.609,3.146,4.296,3.947c2.204,1.049,2.323,2.178,4.51,1.957c1.302-0.971-0.248-4.761-1.988-6 c-2.478-1.764-3.316-4.01-5.146-6.225c-1.941-2.35-6.329-3.662-9.081-4.766c-2.492-1-4.646-2.154-6.329-4.312h-15.691 C204.354,234.064,204.614,234.748,204.844,235.45z","M67.379,290.85c-0.045,9.21-0.068,18.419-0.092,27.629s-0.047,18.419-0.094,27.629c-0.023,4.634,0.18,9.316-0.508,13.912 c-0.565,3.782-1.396,6.984-2.677,10.563c-1.481,4.139-2.316,8.048-2.759,12.409c-0.4,3.936-0.219,8.003-1.061,11.879 c-1.838,8.469-2.01,17.041-1.755,25.694c0.44,14.964,2.638,30.339,0.821,45.323h15.689c-0.012-3.509,0.509-7.03,1.068-10.567 c0.475-2.994,0.762-6.122,1.857-8.97c0.908-2.36,1.936-4.497,2.396-7.005c1.044-5.677,3.037-10.937,4.538-16.474 c1.507-5.563,2.854-11.232,4.081-16.864c1.912-8.769,1.502-17.663,1.486-26.594c-0.003-1.969-0.445-4.538,0.176-6.438 c0.652-1.994,1.342-3.976,2.023-5.959c1.353-3.938,2.039-8.044,3.422-11.944c1.532-4.318,2.287-8.457,2.923-12.982 c0.567-4.029,1.838-7.892,2.283-11.94c0.933-8.478,0.737-17.226,2.925-25.483c1.146-4.327,2.205-8.699,3.512-12.981 c1.196-3.916,3.202-7.486,4.532-11.349c1.421-4.128,2.368-8.473,3.171-12.76c0.305-1.629,0.268-3.362,0.648-4.962 c0.199-0.835,0.723-1.433,1.322-1.977H68.521c-0.136,1.015-0.275,2.029-0.41,3.043C66.917,272.619,67.424,281.849,67.379,290.85z","M129.053,268.396c1.048,8.477,5.229,15.711,7.469,23.857c0.59,2.145,0.998,4.263,1.904,6.31 c0.799,1.807,1.535,3.527,1.869,5.486c0.699,4.11,0.683,8.307,1.407,12.414c0.421,2.384,1.181,4.655,1.433,7.075 c0.213,2.055,0.281,4.124,0.583,6.169c0.626,4.24,1.097,8.504,1.806,12.731c0.746,4.44,2.28,8.713,2.914,13.155 c0.553,3.875,2.269,6.954,3.336,10.646c1.199,4.154,2.238,8.127,2.34,12.469c0.104,4.448,0.105,8.898,0.095,13.349 c-0.01,4.289-0.509,8.775,0.694,12.927c1.109,3.824,2.107,7.636,2.939,11.53c1.732,8.123,4.281,15.986,6.375,24.018 c1.175,4.501,2.191,9.02,3.082,13.584c0.401,2.052,0.818,4.088,1.051,6.166c0.214,1.929,1.162,3.622,1.051,5.606h15.59 c-0.094-2.729-0.008-5.464,0.036-8.199c0.146-9.22,0.396-18.438,0.554-27.658c0.157-9.173-0.608-18.212-0.85-27.365 c-0.122-4.613-1.162-9.001-1.568-13.57c-0.361-4.068-0.541-8.084-1.377-12.095c-0.443-2.129-0.779-4.37-1.604-6.395 c-0.632-1.55-1.624-3.005-1.868-4.691c-0.58-4.017-0.938-8.071-0.961-12.131c-0.104-18.514-0.029-37.028-0.141-55.542 c-0.055-9.044,0.208-18.128-0.025-27.164c-0.092-3.56-0.635-6.983-1.236-10.439h-49.074 C129.13,262.511,128.701,265.556,129.053,268.396z"]
var meatPaths =["M140.885,77.693c-1.66-0.9-2.813-2.233-3.521-3.805h-30.714c-0.967,2.247-2.44,3.735-4.842,5.032 c-3.827,2.067-8.112,3.404-12.073,5.228c-1.773,0.816-3.509,1.628-5.455,1.915c-0.906,0.133-1.828,0.214-2.738,0.348v51.546 c0.111-0.127,0.221-0.26,0.334-0.382c1.576,2.698,2.344,4.526,2.734,7.689c0.243,1.976-0.07,5.029,0.76,6.839 c2.061,4.496,2.494,10.518,2.863,15.408c0.34,4.509,1.143,9.138,1.014,13.656c-0.115,4.017-0.954,7.97-2.098,11.811 c-1.164,3.915-2.432,7.902-4.307,11.528c-1.865,3.605-2.414,7.633-3.141,11.59c-1.527,8.332-5.07,16.14-6.562,24.463 c-0.681,3.803-2.811,7.073-3.347,10.953c-0.42,3.037-0.826,6.083-1.232,9.127h48.789c0.444-0.404,0.93-0.779,1.359-1.196 c1.029-0.999,2.188-2.041,3.738-1.835c1.621,0.215,2.205,1.698,3.535,2.404c0.356,0.189,0.659,0.401,0.932,0.627h49.074 c-0.186-1.069-0.377-2.141-0.562-3.222c-0.707-4.123-1.349-8.239-2.513-12.265c-1.246-4.318-2.308-8.666-3.432-13.012 c-0.493-1.906-1.67-3.535-2.338-5.374c-0.689-1.899-0.865-4.016-1.09-6.011c-0.25-2.211-0.354-4.3-1.303-6.336 c-0.714-1.531-1.58-3.11-1.67-4.835c-0.198-3.777-1.999-7.13-3.384-10.568c-0.71-1.764-0.8-4.41-1.918-5.917 c-1.079-1.454-1.703-3.161-1.963-4.944c-0.589-4.036-0.197-8.388,0.022-12.444c0.471-8.659,1.852-17.484,3.471-25.998 c0.479-2.516,0.988-5.025,1.5-7.534c0.26-1.276,0.276-5.068,1.98-4.245V86.212C155.213,84.669,147.68,81.375,140.885,77.693z","M57.834,474.242c-0.91,3.82-3.347,6.534-5.676,9.579c-2.226,2.909-4.811,4.469-7.57,6.724 c-1.406,1.147-1.868,2.738-1.793,4.51c0.043,1.021,3.054,1.914,3.705,2.19c1.701,0.72,3.414,1.564,5.148,2.193 c1.381,0.502,2.605-0.422,3.992,0.391c1.594,0.935,2.32,1.997,4.332,1.659c1.533-0.258,2.896-1.045,4.066-2.044 c1.791-1.526,2.546-4.767,4.788-5.604c3.352-1.252,3.521-6.535,3.817-9.631c0.385-4.028,1.704-7.487,2.859-11.329 c0.141,0.069,0.281,0.138,0.422,0.207c-0.676-2.394-0.933-4.793-0.941-7.198H59.295C58.955,468.688,58.492,471.476,57.834,474.242z","M168.246,472.163c0.135,1.806,1.332,3.497,2.013,5.141c1.544,3.724,1.289,7.311,1.946,11.185 c0.271,1.595,0.755,4.488,2.214,5.48c1.046,0.713,2.243,1.291,3.064,2.284c0.831,1.005,0.72,2.12,1.511,3.04 c1.125,1.301,2.741,1.901,4.305,2.489c1.913,0.721,2.57,1.366,4.401,0.172c1.538-1.002,2.349-1.542,4.203-1.564 c2.582-0.031,8.117-1.257,9.715-3.495c2.562-3.587-2.138-5.325-4.399-7.217c-2.758-2.306-4.992-5.151-7.051-8.079 c-2.554-3.629-4.103-6.41-4.736-10.874c-0.229-1.608-0.347-3.221-0.402-4.836h-15.59c-0.001,0.01,0,0.019,0,0.028 C169.306,468.082,168.082,469.945,168.246,472.163z","M136.521,69.848c-0.006-3.751-0.109-7.598,1.1-11.202c0.66-1.964,1.748-3.716,2.381-5.699 c0.516-1.613,1.066-3.224,2.173-4.542c2.372-2.825,3.914-5.129,4.274-8.932c0.111-1.169,0.127-2.346,0.09-3.519 c-0.035-1.183,0.361-1.682-0.874-1.781c-1.317-0.106-1.53-1.225-1.589-2.333c-0.206-3.854,0.447-7.731-0.031-11.572 c-0.293-2.352-1.223-4.446-2.049-6.641c-0.596-1.582-0.912-3.875-1.922-5.229c-2.053-2.755-6.527-5.627-9.725-6.766 c-3.655-1.302-8.006-2.188-11.822-1.233c-3.292,0.825-7.344,2.038-10.172,3.939c-6.077,4.088-7.891,13.097-8.113,19.895 c-0.082,2.522,0.047,5.043,0.107,7.564c0.027,1.128,0.564,2.106-0.741,2.285c-1.073,0.147-1.321-0.159-1.446,1.061 c-0.342,3.303-0.046,6.809,1.208,9.906c0.582,1.438,1.409,2.854,2.634,3.839c1.455,1.17,2.08,0.598,2.178,2.721 c0.084,1.833,1.154,2.919,1.781,4.57c0.602,1.587,0.821,3.281,1.02,4.958c0.232,1.977,0.814,3.86,1.096,5.81 c0.259,1.79-0.35,3.592-0.834,5.289c-0.172,0.6-0.375,1.139-0.595,1.651h30.714C136.811,72.661,136.523,71.292,136.521,69.848z","M79.15,86.989c-3.785,1.452-6.304,4.538-8.662,7.586c-1.641,2.119-3.365,6.214-3.358,8.916 c0.005,1.938-1.003,3.688-1.59,5.533c-0.61,1.917-0.931,3.922-1.255,5.903c-0.682,4.155-1.354,8.301-2.143,12.437 c-0.863,4.521-2.08,8.566-3.772,12.852c-1.322,3.348-3.128,6.531-4.254,9.946c-1.351,4.098-2.519,8.209-4.081,12.24 c-1.396,3.604-2.494,7.534-4.283,10.959c-2.039,3.903-4.274,7.559-5.83,11.71c-1.363,3.642-2.133,7.468-3.145,11.218 c-2.263,8.39-3.781,17.058-6.648,25.271c-1.299,3.72-2.529,7.942-4.529,11.359c-0.095,0.161-0.201,0.316-0.311,0.47h14.752v0.482 c2.483-5.503,5.85-10.451,8.923-15.682c3.851-6.554,6.755-13.744,9.724-20.728c1.439-3.386,3.075-6.716,4.351-10.167 c1.241-3.36,1.78-6.915,2.769-10.349c1.004-3.491,1.976-7.016,3.068-10.479c1.09-3.457,3.129-6.499,4.479-9.849 c1.397-3.464,3.165-7.022,3.99-10.673c0.657-2.909,2.23-5.761,4.196-7.987V86.411C80.728,86.531,79.924,86.693,79.15,86.989z","M16.357,238.834c-1.73,0.84-3.926,1.631-5.293,3.041c-1.266,1.307-2.385,2.742-3.596,4.098 c-2.215,2.478-5.207,6.356-4.764,7.586c2.168,2.167,3.271-0.312,5.234-1.589c1.07-0.696,2.037-3.161,4.792-3.284 c1.835-0.082-0.331,4.14-0.7,5.17c-1.555,4.34-2.656,8.861-4.26,13.165c-0.73,1.963-1.77,3.621-2.01,5.752 c-0.232,2.051-2.145,5.23,0.266,6.161c4.398-2.763,5.77-12.209,8.99-15.82c-0.374,3.836-2.671,11.464-3.955,15.098 c-0.887,2.509-1.91,6.487,1.088,6.486c3.283-0.001,7.626-19.076,8.058-20.478c1.368,0.234-0.13,4.552-0.183,5.778 c-0.04,0.926-0.145,1.817-0.431,2.704c-0.509,1.576-1.234,5.406-2.039,6.862c-1.125,2.038,2.729,3.742,3.711,1.393 c2.728-6.53,3.157-9.726,5.577-16.057c0.743,1.801,0.326,2.548,0.102,4.414c-0.212,1.748-0.344,3.562-1.321,6.842 c-0.874,2.932,1.034,5.282,2.917,2.053c1.539-2.643,2.245-5.995,2.807-9.279c0.582-3.4,1.968-6.425,2.382-9.864 c0.856-7.118,2.47-14.964,4.889-21.726c0.425-1.188,0.911-2.336,1.423-3.469v-0.482H25.289 C23.359,236.074,19.172,237.47,16.357,238.834z","M166.668,146.982c0.654,1.729,2.088,3.137,2.73,4.972c0.557,1.593,0.959,3.235,1.533,4.823 c1.294,3.576,3.09,7.026,4.477,10.588c2.964,7.614,4.247,15.583,6.568,23.371c1.263,4.239,4.032,8.275,6.039,12.197 c1.807,3.53,3.262,7.201,4.937,10.788c3.202,6.854,8.304,12.607,11.166,19.667h15.691c-0.005-0.007-0.011-0.012-0.016-0.019 c-3.39-4.367-4.498-10.519-6.374-15.6c-1.314-3.56-1.613-7.366-2.812-10.975c-1.117-3.361-1.896-6.586-2.393-10.09 c-1.178-8.324-5.44-15.812-9.055-23.265c-3.771-7.774-6.816-15.853-9.653-24.014c-1.527-4.392-3.206-8.829-4.331-13.342 c-1.004-4.023-2.986-7.383-3.462-11.583c-0.483-4.258-0.454-8.251-1.976-12.293c-1.387-3.684-1.749-7.566-2.91-11.313 c-1.939-6.253-5.699-13.173-12.736-14.413c-0.434-0.077-0.867-0.182-1.301-0.27v51.723c0.117,0.057,0.242,0.134,0.377,0.237 C165.75,140.154,165.623,144.218,166.668,146.982z","M204.883,235.45c0.626,1.917,2.051,3.322,2.721,5.184c0.652,1.809,0.65,3.993,1.086,5.88 c0.945,4.102,2.456,8.036,3.221,12.186c0.771,4.182,0.536,8.321,1.962,12.379c0.584,1.662,1.249,3.297,1.725,4.994 c0.403,1.442,0.483,2.746,2.177,3.189c1.638,0.429,1.861-2.287,1.823-3.191c-0.062-1.493-0.575-1.217-1.15-4.108 c-0.728-3.657-0.917-4.651-0.831-7.715c1.086-0.879,1.734,1.111,2.153,3.946c0.513,3.473,1.696,6.721,2.806,10.034 c0.403,1.204,0.822,3.522,1.867,4.339c1.23,0.962,2.584,1.376,2.373-0.689c-0.375-3.657-3.093-12.383-2.752-16.041 c1.443-0.143,2.502,3.964,3.147,6.041c0.341,1.097,0.866,3.079,1.306,4.141c0.77,1.855,0.846,3.907,1.609,5.735 c0.709,1.695,2.037,2.773,3.637,1.865c0.612-1.814,0.23-3.593-0.171-5.786c-0.455-2.485-0.851-2.127-2.298-7.062 c-0.389-1.329-2.211-5.02-0.85-7.062c0.68-0.085,0.936,0.681,2.978,6.636c0.233,0.681,3.287,8.054,4.051,8.096 c1.653,0.091,2.175-0.925,2.206-2.19c0.051-2.068-0.738-3.541-1.346-5.392c-1.508-4.597-2.653-8.132-4.038-12.448 c-0.8-2.496-1.56-5.006-2.323-7.513c-0.372-1.22-1.072-2.02,0.471-2.4c0.418-0.104,0.801-0.022,1.107,0.289 c1.159,1.175,2.609,3.146,4.296,3.947c2.204,1.049,2.323,2.178,4.51,1.957c1.302-0.971-0.248-4.761-1.988-6 c-2.478-1.764-3.316-4.01-5.146-6.225c-1.941-2.35-6.329-3.662-9.081-4.766c-2.492-1-4.646-2.154-6.329-4.312h-15.691 C204.393,234.064,204.653,234.748,204.883,235.45z","M67.418,290.85c-0.045,9.21-0.068,18.419-0.092,27.629s-0.047,18.419-0.094,27.629c-0.023,4.634,0.18,9.316-0.508,13.912 c-0.565,3.782-1.396,6.984-2.677,10.563c-1.481,4.139-2.316,8.048-2.759,12.409c-0.4,3.936-0.219,8.003-1.061,11.879 c-1.838,8.469-2.01,17.041-1.755,25.694c0.44,14.964,2.638,30.339,0.821,45.323h15.689c-0.012-3.509,0.509-7.03,1.068-10.567 c0.475-2.994,0.762-6.122,1.857-8.97c0.908-2.36,1.936-4.497,2.396-7.005c1.044-5.677,3.037-10.937,4.538-16.474 c1.507-5.563,2.854-11.232,4.081-16.864c1.912-8.769,1.502-17.663,1.486-26.594c-0.003-1.969-0.445-4.538,0.176-6.438 c0.652-1.994,1.342-3.976,2.023-5.959c1.353-3.938,2.039-8.044,3.422-11.944c1.532-4.318,2.287-8.457,2.923-12.982 c0.567-4.029,1.838-7.892,2.283-11.94c0.933-8.478,0.737-17.226,2.925-25.483c1.146-4.327,2.205-8.699,3.512-12.981 c1.196-3.916,3.202-7.486,4.532-11.349c1.421-4.128,2.368-8.473,3.171-12.76c0.305-1.629,0.268-3.362,0.648-4.962 c0.199-0.835,0.723-1.433,1.322-1.977H68.561c-0.136,1.015-0.275,2.029-0.41,3.043C66.956,272.619,67.463,281.849,67.418,290.85z","M129.092,268.396c1.048,8.477,5.229,15.711,7.469,23.857c0.59,2.145,0.998,4.263,1.904,6.31 c0.799,1.807,1.535,3.527,1.869,5.486c0.699,4.11,0.683,8.307,1.407,12.414c0.421,2.384,1.181,4.655,1.433,7.075 c0.213,2.055,0.281,4.124,0.583,6.169c0.626,4.24,1.097,8.504,1.806,12.731c0.746,4.44,2.28,8.713,2.914,13.155 c0.553,3.875,2.269,6.954,3.336,10.646c1.199,4.154,2.238,8.127,2.34,12.469c0.104,4.448,0.105,8.898,0.095,13.349 c-0.01,4.289-0.509,8.775,0.694,12.927c1.109,3.824,2.107,7.636,2.939,11.53c1.732,8.123,4.281,15.986,6.375,24.018 c1.175,4.501,2.191,9.02,3.082,13.584c0.401,2.052,0.818,4.088,1.051,6.166c0.214,1.929,1.162,3.622,1.051,5.606h15.59 c-0.094-2.729-0.008-5.464,0.036-8.199c0.146-9.22,0.396-18.438,0.554-27.658c0.157-9.173-0.608-18.212-0.85-27.365 c-0.122-4.613-1.162-9.001-1.568-13.57c-0.361-4.068-0.541-8.084-1.377-12.095c-0.443-2.129-0.779-4.37-1.604-6.395 c-0.632-1.55-1.624-3.005-1.868-4.691c-0.58-4.017-0.938-8.071-0.961-12.131c-0.104-18.514-0.029-37.028-0.141-55.542 c-0.055-9.044,0.208-18.128-0.025-27.164c-0.092-3.56-0.635-6.983-1.236-10.439h-49.074 C129.169,262.511,128.74,265.556,129.092,268.396z"]


xyArray ={}
function drawBoundingBox(selector) {
var xyPoint = {}
var bodypart = selector.split(".")[1]

xyPoint["bodypart"] = bodypart

    // get the element
    var el = $(selector)[0]
        pt = $(selector).closest('svg')[0].createSVGPoint();

    // get the bounding box and matrix
    var bbox = el.getBBox(),
        matrix = el.getScreenCTM();

    pt.x = bbox.x;
    pt.y = bbox.y;
    var nw = pt.matrixTransform(matrix);
    pt.x += bbox.width;
    pt.y += bbox.height;
    var se = pt.matrixTransform(matrix);

xyPoint["left"] = nw.x
xyPoint["top"] = nw.y
xyPoint["width"] = se.x - nw.x
xyPoint["height"] = se.y - nw.y


    // make a div in the screen space around the object
    var $div = $('<div class="bbox"/>').css({
            left: nw.x,
            top: nw.y,
            width: se.x - nw.x,
            height: se.y - nw.y
        })
        .appendTo('body');

        xyArray[bodypart] = xyPoint;
}


function getCentroid(selection) {
  var bbox = selection.getBBox();
  return [bbox.x + bbox.width/2, bbox.y + bbox.height/2];
}


function getY(selection) {
  var bbox = selection.getBBox();
  return bbox.y;
}

function getHeight(selection) {
  var bbox = selection.getBBox();
  return bbox.height;
}

function getbottomY(selection) {
  var bbox = selection.getBBox();
  return bbox.y+bbox.height;
}




 var torsoScale = Math.sqrt(meats[5].value/avg)
 var svg = d3.select("#chart")
 .append("svg")
 .attr("width",1200)
 .attr("height",1200)
 .append("g")
 .attr("class", "svgBox")
 .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var bodies = svg.selectAll(".body")
    .data(meats).enter().append("g").attr("class",function(d) {
      return "g-"+d.name;
    })
    .append("path").attr("class",function(d) {
      return d.name;
    }).classed("body",true)
    .attr("d", function(d,i) {
      return meatPaths[i];
    })

  bodies.attr("transform", function(d,i) {

    var scaleX,scaleY,multiplier;
    var centroid = getCentroid(this);
    var x = centroid[0];
    var y = centroid[1];
    var scalingFactor = Math.sqrt(d.value/avg);

         return "translate(" + x + "," + y + ")"
            + "scale(" + scalingFactor + ")"
            + "translate(" + -x + "," + (-y) + ")";

    });



        meats.forEach(function(d,i) {
          drawBoundingBox("."+d.name);
        })


          var torsoObj = xyArray.torso;
          var headObj = xyArray.head;
          var bodyCenter = (torsoObj.width/2)+torsoObj.left;

          var headPosition = headObj.top - (torsoObj.top-headObj.height)

          d3.select(".g-head").attr("transform", function() { return "translate(" + 0 + "," + -headPosition + ")"; });


          var leftlegObject = xyArray.leftleg;
          var rightLegObject = xyArray.rightleg;
          var leftlegPosition = (torsoObj.top+torsoObj.height) -leftlegObject.top;
          var rightlegPosition = (torsoObj.top+torsoObj.height) -rightLegObject.top;

          var leftlegPositionX = bodyCenter-(leftlegObject.left+leftlegObject.width);
          var rightlegPositionX = bodyCenter -rightLegObject.left;

          d3.select(".g-leftleg").attr("transform", function() { return "translate(" +leftlegPositionX + "," + leftlegPosition + ")"; });
          d3.select(".g-rightleg").attr("transform", function() { return "translate(" + rightlegPositionX + "," + rightlegPosition + ")"; });


          var leftfootObject = xyArray.leftfoot;
          var rightfootObject = xyArray.rightfoot;

          var leftfootPositionX =  bodyCenter -(leftfootObject.left+leftfootObject.width+ (leftlegObject.width/1.5));
          var leftfootPosition = (torsoObj.top+torsoObj.height+leftlegObject.height)-(leftfootObject.top);

          var rightfootPositionX = bodyCenter -rightfootObject.left +(rightLegObject.width/1.5);
          var rightfootPosition = (torsoObj.top+torsoObj.height+rightLegObject.height)-(rightfootObject.top);

          d3.select(".g-leftfoot").attr("transform", function() {return "translate(" + leftfootPositionX + "," + leftfootPosition + ")"});
          d3.select(".g-rightfoot").attr("transform", function() {return "translate(" + rightfootPositionX + "," + rightfootPosition + ")"});


          var leftArmObj = xyArray.leftarm;
          var rightArmObj = xyArray.rightarm;
          var leftHandObj = xyArray.lefthand;
          var rightHandObj = xyArray.righthand;

          var leftArmPositionX = torsoObj.left - (leftArmObj.left+leftArmObj.width)
          var rightArmPositionX = torsoObj.left+torsoObj.width - (rightArmObj.left)


          var leftArmPosition = torsoObj.top - leftArmObj.top
          var rightArmPosition = torsoObj.top - rightArmObj.top


          d3.select(".g-leftarm").attr("transform", function() {return "translate(" + leftArmPositionX + "," + leftArmPosition + ")"});
          d3.select(".g-rightarm").attr("transform", function() {return "translate(" + rightArmPositionX + "," + rightArmPosition + ")"});

          var leftHandPosition = leftArmObj.top+leftArmPosition+leftArmObj.height - leftHandObj.top
          var rightHandPosition = rightArmObj.top+rightArmPosition+rightArmObj.height - rightHandObj.top

          var leftHandPositionX = torsoObj.left-leftArmObj.width - (leftHandObj.left+leftHandObj.width/2)
          var rightHandPositionX = torsoObj.left+torsoObj.width+rightArmObj.width - (rightArmObj.left+rightArmObj.width)

          d3.select(".g-lefthand").attr("transform", function() {return "translate(" + leftHandPositionX + "," + leftHandPosition + ")"});
          d3.select(".g-righthand").attr("transform", function() {return "translate(" + rightHandPositionX + "," + rightHandPosition + ")"});

</script>

</body>